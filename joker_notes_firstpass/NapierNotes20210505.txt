Napier: 5/5/2021

- Goals: Norm v NoNorm NN

- Experiment: Hisham, Mender

- Recording Start Time: 11:45 am
- Recording Stop Time:  1:15 pm

- xPC Model: Rig_main_Cortical_Parasite
- Recorded Array: Lateral (Patient Cable)
- Data recorded: Spikes (250Hz highpass, RMS -4.5) + Raw + 2kSps 300-1000HzBPas continuous
- Drink: Apple Juice

- Params: 
	* Movement Mask: [0,1,0,1,0]
	* Target Hold Time (OL/CL): 750/500
	* Target Scaling(OL/CL): 100
	* Juice Time: 100
	* Trial Timeout: 10000
	* Auto Juice: 0
   	* Target Pos Style (OL/CL): 29
	* Visualization Style: MRS
	
-Decoders:

NORMNET
Epoch 5, Iteration 1700, loss = 0.1422
Checking accuracy on validation set
Mean Correlation is 0.603695
Mean SNR is 3.82296.
Total number of peaks is 148.
Average control peaks is 0.577533.
Average signal peaks is 0.0656529.
Ratio of control to true signal is 8.79676.
Feature number 0.
Median of feature is -0.00604931.
Ratio of control to true signal is 2.05955.
Correlation is 0.558641
Feature number 1.
Median of feature is 0.187137.
Ratio of control to true signal is 15.3182.
Correlation is 0.648749

NONORMNET 
Epoch 27, Iteration 8700, loss = 0.0009
Checking accuracy on validation set
Mean Correlation is 0.59811
Mean SNR is 2.7344.
Total number of peaks is 497.
Average control peaks is 0.0346456.
Average signal peaks is 0.0656529.
Ratio of control to true signal is 0.527708.
Feature number 0.
Median of feature is 0.00134058.
Ratio of control to true signal is 0.365843.
Correlation is 0.586435
Feature number 1.
Median of feature is -0.00807366.
Ratio of control to true signal is 0.68439.
Correlation is 0.609785

NONORMNET
Epoch 30, Iteration 9600, loss = 0.0012
Checking accuracy on validation set
Mean Correlation is 0.623488
Mean SNR is 2.78676.
Total number of peaks is 410.
Average control peaks is 0.0245466.
Average signal peaks is 0.0656529.
Ratio of control to true signal is 0.373885.
Feature number 0.
Median of feature is 0.00224615.
Ratio of control to true signal is 0.305506.
Correlation is 0.600596
Feature number 1.
Median of feature is -0.00464729.
Ratio of control to true signal is 0.440075.
Correlation is 0.646379

NORMNET
-Runs:
	Run 1: Calibration
	Run 2: Warm-up 125 followed by 5min break
	Run 3: Training 400
	Run 4: Validation 100, break for training
	Run 5: NN 1 - Having trouble moving with MRS - maybe offset is off. At 24, changed offset on MRS to 0 - didnt help, adjusting gain (super low)
			Honestly just not really working (will retrain and try a later network)
	Run 6: NN 2 - Actually seemed functional, so that's good. Around 40 tried to remove offset and gain, didnt help 
	Run 7: NN 3 - Oops wrong offset (restarting)
	Run 8: NN 3 - 200 trials - restarted (some adjustments but all good by trial 20)
	Run 9: NN 2 - relized bias term was not commented out
	
-Notes:
	good_chans_SBP = [1:9,11,13,15,17,23,24,33,35,37:40,43,45:47,49:53,55:60,62,64,65,67:69,71:76,78:88,90:92,95,96];
	
	- DECODER SELECTION: For both norm and no norm, used first decoder w/ mean correlation of 0.6
		 - for no norm chose two because one got v close to .6
	
	-Norm seemed to work but would need a lot of manual calibration (i think this highlights need for nnkf of nnrr)
	-No Norm had really crazy stopping abilities (seemed like it had a high threshold for initiating any kind of acceleration) - that said, it worked pretty well. Imagine it would also benefit from an rr
	