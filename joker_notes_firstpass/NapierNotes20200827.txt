Napier: 8/27/2020

- Goals: Spring decoders online. Faster training sets to see if I can get more consistent performance.

- Experiment: Mender, Eric

- Recording Start Time: 9:00 am
- Recording Stop Time:  11:00 am

- xPC Model: Rig_main_Cortical_SBP_Spikes_CAR
- Recorded Array: Motor (Patient Cable)
- Data recorded: Spikes (250Hz highpass, RMS -4.5, referenced to Ch14) + Raw + 2kSps 300-1000HzBPas continuous (referenced to Ch14)
- Drink: Apple Juice

- Params: 
	* Movement Mask: [0,1,0,1,0]
	* Target Hold Time (OL/CL): 750 (training); 500 (testing)
	* Target Scaling(OL/CL): 100
	* Juice Time: 100
	* Trial Timeout: 10000
	* Auto Juice: 0
	* Target Pos Style: 34
	* Visualization Style: MRP
	
-Decoders: 
	KF0: TrainOnline_Cortical_KalmanFilter_Multi('Joker','',3,false,[2,4],32,0,good_chans_SBP,good_chans_SBP,1,{'act_thresh',1},true); % Normal
	KF1: TrainOnline_Cortical_KalmanFilter_Multi('Joker','',4,false,[2,4],32,0,good_chans_SBP,good_chans_SBP,1,{'act_thresh',1},true); % Spring
	RF0: TrainOnline_Cortical_KalmanFilterReFIT_Multi('Joker','',5,5,0,[2,4],32,xpcBinLag,xpcA,xpcW,good_chans_SBP,good_chans_SBP, 1, {[], []}, true); % RF KF0
	RF1: TrainOnline_Cortical_KalmanFilterReFIT_Multi('Joker','',6,6,0,[2,4],32,xpcBinLag,xpcA,xpcW,good_chans_SBP,good_chans_SBP, 1, {[], []}, true); % RF KF1

-Runs:
	Run 1: TS 34 - Warmup - 350 trials
	Run 2: TS 34 - a few trials while I went back and then double checking calibration
	Run 3: TS 34 - Training set (normal)
	Run 4: TS 34 - Training set (springs 2/4)
	Run 5: TS 34 - KF0 - started while I was still in the room and then I left. He stopped for a few trials when I stepped out. Bit rates in the 1.3 range
	Run 6: TS 34 - KF1 - decoder is also working well. Bit rates in the 1.3 range.
	Run 7: TS 34 - KF0 - Looks more shakey than the first time. I think he's having trouble with flexion. Sped up after some trials too. Accidentally didn't stop the run so the last 30 trials or so are blank screen. 
	Run 8: TS 34 - RF0 - trouble with split fingers mainly when index is flexed.
	Run 9: TS 34 - RF1 - realized that ReFIT was trained wrong during this one.
	Run 10: TS 34 - just to compare activity at beginning and end. 330 trials and then he ran out of juice. 

-Notes:
good_chans_SBP = [1,3:9,12,13,15,20,21,25,30,32,33,35,37:38,40,43,44,47,50:52,55,57:60,62,65:68,70:76,78:87,90:92,96];

Doing the spring training sets from back in the rig
On most of the decoders he is struggling with split fingers. 

I had the wrong parameters loaded in while training ReFIT so they are not correct. I.e. KF1 was loaded but RF0 was trained on the KF0 run. 