Napier: 7/23/2021

- Goals: Nerve Block w/ Brain Control and FES (not together)
 
- Experiment: Sam, Dylan, Eric

- Recording Start Time: 8:35 am
- Recording Stop Time:  1:00 pm

- xPC Model: Rig_main_Cortical_SBP_Spikes_CAR
- Recorded Array: Motor (Patient Cable) + Sensory (CPE)
- Data recorded: Spikes (250Hz highpass, RMS -4.5) + 2kSps 300-1000HzBPas continuous
- Drink: Apple Juice

- Params: 
	* Movement Mask: [0,1,0,1,0]
	* Target Hold Time (OL/CL): 750/500
	* Target Scaling(OL/CL): 100
	* Juice Time: 100
	* Trial Timeout: 10000
	* Auto Juice: 0
   	* Target Pos Style (OL/CL): 34
	* Visualization Style: MRS
	
-Decoders:
	KF0: TrainOnline_Cortical_KalmanFilter_Multi('Joker','',2,false,[2 4],32,0,good_chans_SBP,good_chans_SBP,1,{'act_thresh',1},0,true);
	
	RF0: TrainOnline_Cortical_KalmanFilterReFIT_Multi('Joker','',4,4,false,[2,4],32,xpcBinLag,xpcA,xpcW,good_chans_SBP,good_chans_SBP,1,{[], []},true);
	RF1: TrainOnline_Cortical_KalmanFilterReFIT_Multi('Joker','',4,5,false,[2,4],32,xpcBinLag,xpcA,xpcW,good_chans_SBP,good_chans_SBP,1,{[], []},true);
	
	RF2: TrainOnline_Cortical_KalmanFilterReFIT_Multi('Joker','',4,7,false,[2,4],32,xpcBinLag,xpcA,xpcW,good_chans_SBP,good_chans_SBP,1,{[], []},true);
	
-Runs:
	Run 1: Calibration
	Run 2: Training TS34 (DVR video 1)
	Run 3: Wrong VInt
	Run 4: KF0 SBP Vint=0 (DVR video 2): Shaky, but high velocities and pretty good controllability. 2.3bps
	Run 5: RF0 SBP Vint=0 (DVR video 3): Looks smoother than KF0, not much faster. Bit rate is about the same.
	Run 6: RF1 SBP Vint=0 (DVR video 4): Looks just about the same as RF0, maybe a bit more controllable traded with slower velocities.
	
	BLOCK DELIVERED
	
	Run 7: RF1 SBP Vint=0 (DVR video 5): Required a manual velocity bias added around trial 25, +0.0001. Not as good as pre-block. Tough time with extension. Seems to have some flexion ability.
	Run 8: RF2 SBP Vint=0 (DVR video 6): Forgot to turn off velocity bias.
	Run 9: RF2 SBP Vint=0 (DVR video 6): Still not working. Had to reset decoder around trial 5, but now working great with no velocity bias. Looks pretty good, might be better than RF1 post block. Definitely better, 2.5 bit rate. Cannot do hand control at all. 
	Run 10: RF1 SBP Vint=0 (DVR video 7): No longer requires velocity bias. Cannot do all targets, but velocities are pretty good. CL trials 180s lots of noise on motor, some manual juice helped him focus again.
	Run 11: RF2 SBP Vint=0 (DVR video 8): Easier to do all targets it seems. 2.5 bit rate brain control. Cannot extend in hand control.
	
-Notes:
	good_chans_SBP = [1:9,11,13,15,17,23,24,33,35,37:40,43,45:47,49:53,55:60,62,64,65,67:69,71:76,78:88,90:92,95,96];
	
	every time the fingers flex, it's him moving his arm