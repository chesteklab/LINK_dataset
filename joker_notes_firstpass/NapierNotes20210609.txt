Napier: 6/09/2021

- Goals: Look atthe effect of gain/offset on the network.
 
- Experiment: Hisham, Joey, Matt

- Recording Start Time: 11:00 am
- Recording Stop Time:  1:00 pm

- xPC Model: Rig_main_Cortical_Parasite
- Recorded Array: Lateral (Patient Cable)
- Data recorded: Spikes (250Hz highpass, RMS -4.5) + 2kSps 300-1000HzBPas continuous
- Drink: Apple Juice

- Params: 
	* Movement Mask: [0,1,0,1,0]
	* Target Hold Time (OL/CL): 750/500
	* Target Scaling(OL/CL): 100
	* Juice Time: 100
	* Trial Timeout: 10000
	* Auto Juice: 0
   	* Target Pos Style (OL/CL): 29
	* Visualization Style: MRS
	
-Decoders:
Epoch 12, Iteration 4000, loss = 0.0091
Checking accuracy on validation set
Mean Correlation is 0.613989
Mean SNR is 2.38343.
Total number of peaks is 433.
Average control peaks is 0.112559.
Average signal peaks is 0.0704058.
Ratio of control to true signal is 1.59871.
Feature number 0.
Median of feature is 0.0050996.
Ratio of control to true signal is 0.566277.
Correlation is 0.577427
Feature number 1.
Median of feature is -0.000682153.
Ratio of control to true signal is 2.68469.
Correlation is 0.650552

-Runs:
	Run 1: Calibration
	Run 2: Warm-Up TS29 - 150 Trials, followed by 5 min break
	Run 3: TS29 - Training (400 Trials)
	Run 4: TS29 - Validation (100 Trials) - followed by training break
	Run 5: NN - 100 Trials. Pretty decent honestly. - (750)
	Run 6: NN - 35 Trials then stopped (750)
	Run 7: NN - W/ actual offsets. Shifting focus for today. exploring this more. (750)
	Run 8: NN - 50 trials,;
	Run 9: NN - 75 trials, 
	Run 10: NN - 50 Trials, - realized hadn't reconnected model from 8-10, so no actual changes were made. also realized final batchnorm/denormalization was off.
	Run 11: NN - 23 Trials. Offsets on, Final Batchnorm on. - couldn't acquire anything (interestingly this is the way we would be running the network)
	Run 12: NN - Offsets off, Final Batchnorm on. - still garbo
	Run 13: NN - Offsets off, Final Batchnorm on (BUT NO DENORMALIZING) scores = self.bn5(self.fc4(x)) Stopped bc I thought there was a problem, there wasnt
	Run 14: NN - Offsets off, Final Batchnorm on (BUT NO DENORMALIZING)
	Run 15: NN - Offsets off, FB off -works great.
	Run 16: NN - Offsets on, FB off - work
	
-Notes:
	- after run 5, trained refit but correlations were very strange. Noticed gains and offsets hadn't been used. but did fine in 5 and 6.
	- More questions coming out than going in tbh
	good_chans_SBP = [1:9,11,13,15,17,23,24,33,35,37:40,43,45:47,49:53,55:60,62,64,65,67:69,71:76,78:88,90:92,95,96];
	
	
	
	
	